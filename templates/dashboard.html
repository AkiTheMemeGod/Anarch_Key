<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnarchKey Dashboard</title>
    <link rel="icon" href="/static/logo.png" type="image/x-icon" style="width: 10px; height: 10px;">
    <link rel="stylesheet" href="../static/index.css">
    <link rel="stylesheet" href="../static/dashboard.css">

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark">
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <img src="../static/logo.png" alt="AnarchKey Logo" class="logo-img">
                    <span>AnarchKey</span>
                </div>
                <div class="nav-actions">
                    <button id="themeToggle" class="theme-toggle">
                        <i data-lucide="sun" class="sun-icon"></i>
                        <i data-lucide="moon" class="moon-icon"></i>
                    </button>
                    <button onclick="window.location.href='/logout'" class="secondary-btn">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>Dashboard</h1>
            <button class="primary-btn" id="createKeyBtn">
                <i data-lucide="plus" style="width: 1rem; height: 1rem; margin-right: 0.5rem;"></i>
                Create New API Key
            </button>
        </div>

        <div class="welcome-card">
            <h2>Welcome, <span id="username">User</span>!</h2>
            <p>Manage your API keys securely with AnarchKey. Create, track, and rotate keys with ease.</p>
        </div>

        <div class="dashboard-grid">
            <div class="feature-card">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3>Your API Keys</h3>
                    <span class="key-badge" id="keyCount">0</span>
                </div>
                <div id="apiKeysList">
                    <div class="empty-state">
                        <i data-lucide="key" style="width: 3rem; height: 3rem; margin-bottom: 1rem;"></i>
                        <p>No API keys found. Create your first key to get started.</p>
                    </div>
                    <!-- API keys will be loaded here -->
                </div>
            </div>

            <div class="feature-card">
                <h3>Account Information</h3>
                <div style="margin-top: 1rem;">
                    <div style="margin-bottom: 1rem;">
                        <strong>Username:</strong>
                        <span id="accountUsername">Loading...</span>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <strong>Email:</strong>
                        <span id="accountEmail">Loading...</span>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <strong>Account Type:</strong>
                        <span class="key-badge">Free</span>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <strong>Member Since:</strong>
                        <span id="memberSince">Loading...</span>
                    </div>
                </div>
                <div style="margin-top: 2rem;">
<button class="secondary-btn" style="width: 100%;" onclick="window.location.href='/view_service_key'">
    <i data-lucide="settings" style="width: 1rem; height: 1rem; margin-right: 0.5rem;"></i>
    View AnarchKey Service Key
</button>

<button class="secondary-btn" style="width: 100%;" onclick="window.location.href='/account_settings'">
    <i data-lucide="settings" style="width: 1rem; height: 1rem; margin-right: 0.5rem;"></i>
    Account Settings
</button>
                </div>
            </div>
        </div>

<div class="feature-card">
    <h3>Recent Activity</h3>
    <div style="margin-top: 1rem;">
        <div class="empty-state">
            <i data-lucide="activity" style="width: 3rem; height: 3rem; margin-bottom: 1rem;"></i>
            <p>No recent activity to display.</p>
        </div>
    </div>
</div>

    <!-- View API Key Modal -->

    <!-- Create API Key Modal -->
<div id="createKeyModal" class="modal">
    <div class="modal-content">
        <h3>Add New API Key</h3>
        <p style="margin-bottom: 1.5rem; opacity: 0.8;">Enter a project name and your custom API key.</p>
        <form id="createKeyForm">
            <div class="form-group">
                <label for="projectName">Project Name</label>
                <input type="text" id="projectName" placeholder="e.g., My Awesome Project" required>
            </div>
            <div class="form-group">
                <label for="customApiKey">API Key</label>
                <input type="text" id="customApiKey" placeholder="Enter your custom API key" required>
            </div>
            <div class="modal-actions">
                <button type="button" class="secondary-btn" id="cancelCreateKey">Cancel</button>
                <button type="submit" class="primary-btn">Add Key</button>
            </div>
        </form>
    </div>
</div>
        <div id="customAlert" class="custom-alert hidden">
    <div class="custom-alert-content">
        <p id="alertMessage">This is a custom alert message.</p>
        <button id="closeAlert" class="secondary-btn">Close</button>
    </div>
</div>

    <footer>
        <div class="container">
            <p>© 2025 AnarchKey | All Rights Reserved | No API keys were harmed in the making of this product</p>
            <br>
            <p>Powered by <a href="https://protobase.pythonanywhere.com" target="_blank" style="color: #ff4b2b; text-decoration: none;">ProtoBase</a> – because reinventing authentication is for people with too much free time.</p>
        </div>
    </footer>
    <script src="../static/dashboard.js"></script>
<script>
document.getElementById('username').textContent = '{{ session.username }}';
document.getElementById('accountUsername').textContent = '{{ session.username }}';
</script>
</body>
</html>